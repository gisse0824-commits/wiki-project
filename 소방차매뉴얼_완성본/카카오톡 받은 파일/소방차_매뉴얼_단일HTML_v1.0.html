<!doctype html>
<html lang="ko" data-app-version="1.0">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì†Œë°©ì°¨ ë§¤ë‰´ì–¼ | ë‹¨ì¼ HTML</title>
  <meta name="description" content="íŒí”„ì°¨ ì¤‘ì‹¬ ì†Œë°©ì°¨ ë§¤ë‰´ì–¼ â€” ì˜¤í”„ë¼ì¸ì—ì„œë„ ì‘ë™í•˜ëŠ” ë‹¨ì¼ HTML" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' data: blob:; img-src 'self' data:; media-src 'self' data:; style-src 'self' 'unsafe-inline';" />
  <style>
    /* ===== CSS ë¦¬ì…‹ & í† í° ===== */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { margin:0; padding:0; height:100%; }
    :root{
      --bg: #0b0f14;
      --panel: #0f151d;
      --muted: #96a0aa;
      --text: #e8eef5;
      --brand: #1aa3ff;
      --accent: #1bd19e;
      --danger: #ff3b4f;
      --warn: #ffb020;
      --ok: #2dd36f;
      --border: #1e2630;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 16px;
      --radius-sm: 12px;
      --focus: 0 0 0 3px rgba(26,163,255,.35);
      --font: ui-sans-serif, -apple-system, system-ui, Segoe UI, Roboto, "Noto Sans KR", Apple SD Gothic Neo, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f7fbff; --panel:#ffffff; --text:#0a1623; --muted:#5e6a76; --border:#e6edf5; --shadow: 0 10px 30px rgba(2,12,24,.08);
      }
    }

    body{ font-family: var(--font); background: linear-gradient(180deg, #1a1d35 0%, #0d0f1f 50%, #1a1d35 100%); color: var(--text); }
    a{ color: var(--brand); text-decoration: none; }
    a:focus-visible, button:focus-visible, input:focus-visible, select:focus-visible { outline: none; box-shadow: var(--focus); border-radius: 10px; }
    .visually-hidden{ position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }

    /* ===== ê³µí†µ êµ¬ì„± ===== */
    .container{ max-width:1200px; margin:0 auto; padding:24px; }
    .card{ background: rgba(15,21,29,0.7); border:1px solid rgba(26,163,255,0.2); border-radius: var(--radius); box-shadow: 0 8px 32px rgba(0,0,0,0.4); backdrop-filter: blur(10px); }
    .p-24{ padding:24px; } .p-16{ padding:16px; }
    .mt-8{ margin-top:8px; } .mt-12{ margin-top:12px; } .mt-16{ margin-top:16px; } .mt-24{ margin-top:24px; }
    .mb-8{ margin-bottom:8px;} .mb-16{ margin-bottom:16px;} .mb-24{ margin-bottom:24px;}
    .grid{ display:grid; gap:16px; }
    .grid-2{ grid-template-columns: 280px 1fr; }
    .row{ display:flex; gap:12px; align-items:center; }
    .tag{ display:inline-flex; align-items:center; gap:8px; border:1px solid rgba(26,163,255,0.3); background:linear-gradient(180deg, rgba(26,163,255,.1), rgba(26,163,255,.05)); padding:10px 14px; border-radius:999px; font-weight:600; cursor:pointer; color: #ffffff; transition: all 0.3s ease; }
    .tag:hover{ background:linear-gradient(180deg, rgba(26,163,255,.2), rgba(26,163,255,.1)); box-shadow: 0 4px 12px rgba(26,163,255,0.3); }
    .chip{ display:inline-flex; align-items:center; gap:6px; border:1px dashed rgba(26,163,255,0.3); padding:6px 10px; border-radius:999px; font-size:12px; color: rgba(255,255,255,0.7); }
    .muted{ color: rgba(255,255,255,0.6); }
    .btn{ display:inline-flex; align-items:center; gap:10px; background: linear-gradient(180deg, rgba(26,163,255,.25), rgba(26,163,255,.15)); border:1px solid rgba(26,163,255,0.4); padding:12px 16px; border-radius: 12px; cursor:pointer; font-weight:700; color: #ffffff; transition: all 0.3s ease; }
    .btn:hover{ background: linear-gradient(180deg, rgba(26,163,255,.35), rgba(26,163,255,.25)); box-shadow: 0 4px 15px rgba(26,163,255,0.4); }
    .btn.secondary{ background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); border-color: rgba(255,255,255,0.2); }
    .btn.secondary:hover{ background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.1)); }
    .btn.danger{ background: linear-gradient(180deg, rgba(255,59,79,.25), rgba(255,59,79,.15)); border-color: rgba(255,59,79,0.4); }
    .btn.danger:hover{ background: linear-gradient(180deg, rgba(255,59,79,.35), rgba(255,59,79,.25)); }
    .kbd{ font-family: var(--mono); font-size:12px; border:1px solid rgba(26,163,255,0.3); padding:2px 6px; border-radius:8px; background: rgba(26,163,255,0.1); color: #ffffff; }
    .progress{ height:10px; background:rgba(255,255,255,.1); border-radius:999px; overflow:hidden; border:1px solid rgba(26,163,255,0.3); }
    .progress > span{ display:block; height:100%; background: linear-gradient(90deg, #1aa3ff, #0d8ae6); }

    /* ===== í™ˆ(ê²€ìƒ‰) ===== */
    #home{ min-height:100dvh; display:grid; place-items:center; padding:24px; background: linear-gradient(180deg, rgba(26,29,53,0.95) 0%, rgba(13,15,31,1) 50%, rgba(26,29,53,0.95) 100%); }
    .hero{ text-align:center; max-width:900px; }
    .logo{ font-weight:900; font-size:clamp(48px, 6vw, 72px); letter-spacing:1px; background: linear-gradient(135deg, #ff6b6b 0%, #ff4757 50%, #ff3838 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 20px; }
    .logo-prefix{ font-size: clamp(48px, 6vw, 72px); color: #ff4757; font-weight: 900; margin-right: 8px; }
    .sub{ color: #ffffff; margin-top:16px; font-size: clamp(16px, 2vw, 20px); font-weight: 500; }
    .search{ display:flex; gap:12px; margin:40px auto 20px; max-width:800px; background: rgba(30,35,50,0.8); padding: 8px; border-radius: 50px; border: 2px solid rgba(26,163,255,0.3); box-shadow: 0 0 40px rgba(26,163,255,0.2); }
    .search input{ flex:1; padding:18px 28px; border-radius: 50px; border:none; background: transparent; color:#ffffff; font-size:17px; outline: none; }
    .search input::placeholder{ color: rgba(255,255,255,0.5); }
    .search button{ background: linear-gradient(135deg, #1aa3ff 0%, #0d8ae6 100%); border: none; border-radius: 50px; padding: 14px 32px; color: white; font-weight: 700; font-size: 16px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(26,163,255,0.4); }
    .search button:hover{ transform: translateY(-2px); box-shadow: 0 6px 20px rgba(26,163,255,0.6); }

    /* ===== ì•± ë ˆì´ì•„ì›ƒ ===== */
    #app{ display:none; min-height:100dvh; background: linear-gradient(180deg, #1a1d35 0%, #0d0f1f 50%, #1a1d35 100%); }
    header.appbar{ position:sticky; top:0; z-index:10; backdrop-filter: blur(12px); background: rgba(26,29,53,0.85); border-bottom:1px solid rgba(26,163,255,0.2);
      display:flex; align-items:center; gap:16px; padding:12px 18px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); }
    .app-logo{ font-weight:900; letter-spacing:.3px; color: #ff4757; font-size: 18px; }
    .leftnav{ position:sticky; top:60px; align-self:start; max-height: calc(100dvh - 100px); overflow:auto; border:1px solid rgba(26,163,255,0.3); border-radius: var(--radius); background: rgba(15,21,29,0.6); backdrop-filter: blur(10px); }
    .leftnav a{ display:flex; align-items:center; gap:10px; padding:12px 14px; color:#ffffff; border-bottom:1px solid rgba(26,163,255,0.1); transition: all 0.3s ease; border-left: 3px solid transparent; }
    .leftnav a:hover{ background: linear-gradient(90deg, rgba(26,163,255,.15), transparent 80%); }
    .leftnav a[aria-current="true"]{ background: linear-gradient(90deg, rgba(26,163,255,.25), transparent 80%); border-left-color: #1aa3ff; font-weight: 700; box-shadow: 0 0 15px rgba(26,163,255,0.2); }
    .content{ min-height:60dvh; padding-bottom: 40vh; }
    .section{ scroll-margin-top: 90px; }
    .section:last-child{ margin-bottom: 0; }

    /* ===== í‘œ ===== */
    table{ width:100%; border-collapse:separate; border-spacing:0; border:1px solid rgba(26,163,255,0.3); border-radius:14px; overflow:hidden; background: rgba(15,21,29,0.5); }
    thead th{ text-align:left; background: linear-gradient(180deg, rgba(26,163,255,.2), rgba(26,163,255,.1)); padding:12px 12px; position:sticky; top:0; color: #ffffff; font-weight: 700; }
    tbody td{ border-top:1px solid rgba(26,163,255,0.2); padding:12px 12px; vertical-align:top; color: rgba(255,255,255,0.9); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    tbody tr:hover{ background: rgba(26,163,255,0.05); }
    code{ font-family: var(--mono); background: rgba(26,163,255,.15); border:1px solid rgba(26,163,255,0.3); padding:2px 6px; border-radius:8px; color: #1aa3ff; }
    details{ background: rgba(15,21,29,0.5); border: 1px solid rgba(26,163,255,0.2); border-radius: 12px; padding: 16px; }
    details summary{ cursor: pointer; font-weight: 700; color: #ffffff; transition: all 0.3s ease; }
    details summary:hover{ color: #1aa3ff; }
    details[open] summary{ margin-bottom: 12px; color: #1aa3ff; }
    h2, h3, h4{ color: #ffffff; }
    strong{ color: #1aa3ff; }
    ul, ol{ color: rgba(255,255,255,0.9); }
    p{ color: rgba(255,255,255,0.85); }

    /* ===== í”„ë¦°íŠ¸ ===== */
    @media print{
      header.appbar, .leftnav, #home{ display:none !important; }
      #app{ display:block !important; }
      .container{ max-width:100%; padding:0; }
      .card{ box-shadow:none; border-color:#ccc; }
      a[href]:after{ content:" (" attr(href) ")"; font-size:12px; color:#555; }
    }
    /* ===== ì¢Œì¸¡ ëª©ì°¨ë¥¼ í™”ë©´ ì™¼ìª½ì— ì™„ì „íˆ ë¶™ì´ê¸° ===== */
    #app .container{ max-width:100%; margin:0; padding:24px 24px 24px 0; }
    #app .leftnav{ border-top-left-radius:0; border-bottom-left-radius:0; }
  </style>
</head>
<body>
  <!-- ===== í™ˆ(ê²€ìƒ‰) ===== -->
  <main id="home" aria-labelledby="home-title">
    <div class="hero">
      <div class="chip" style="background: rgba(255,71,87,0.15); border-color: rgba(255,71,87,0.3); color: #ff4757; font-size: 20px; padding: 14px 24px; font-weight: 700;">ì¸ì²œì†Œë°©ë³¸ë¶€ 119ì†Œë°©ìœ„í‚¤</div>
      <h1 id="home-title" class="logo"><span class="logo-prefix">119</span>ì†Œë°©ì°¨ ë§¤ë‰´ì–¼</h1>
      <form class="search" id="searchForm" autocomplete="off">
        <label for="q" class="visually-hidden">ê²€ìƒ‰ì–´</label>
        <input id="q" name="q" inputmode="search" placeholder="í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”." aria-describedby="hint" />
        <button type="submit" aria-label="ê²€ìƒ‰ ì‹¤í–‰">ê²€ìƒ‰</button>
      </form>
      <div class="row" role="list" aria-label="ë¹ ë¥¸ ì‹œì‘" style="justify-content: center; margin-top: 24px; flex-wrap: wrap;">
        <button class="tag" role="listitem" data-open="pump" style="background: rgba(26,163,255,0.15); border-color: rgba(26,163,255,0.4); color: #1aa3ff; font-size: 15px; padding: 12px 20px;">ğŸš’ íŒí”„ì°¨ ë§¤ë‰´ì–¼ ì—´ê¸°</button>
        <button class="tag" role="listitem" data-open="water" style="background: rgba(27,209,158,0.15); border-color: rgba(27,209,158,0.4); color: #1bd19e; font-size: 15px; padding: 12px 20px;">ğŸšš ë¬¼íƒ±í¬ì°¨ ë§¤ë‰´ì–¼ ì—´ê¸°</button>
        <button class="tag" role="listitem" data-open="ladder" style="background: rgba(255,176,32,0.15); border-color: rgba(255,176,32,0.4); color: #ffb020; font-size: 15px; padding: 12px 20px;">ğŸªœ ê³ ê°€ì°¨ ë§¤ë‰´ì–¼ ì—´ê¸°</button>
      </div>
      <p id="hint" class="muted mt-16" style="color: rgba(255,255,255,0.4); font-size: 13px;">ì˜¤í”„ë¼ì¸ ë‹¨ì¼ HTML Â· ì ‘ê·¼ì„± ìµœì í™” Â· í”„ë¦°íŠ¸ ì§€ì›</p>
    </div>
  </main>

  <!-- ===== ì•±(ë§¤ë‰´ì–¼) ===== -->
  <div id="app" role="application" aria-label="ë§¤ë‰´ì–¼ ì•±">
    <header class="appbar">
      <strong class="app-logo">ğŸš’ ì†Œë°©ì°¨ ë§¤ë‰´ì–¼</strong>
      <nav class="row" aria-label="ë°”ë¡œê°€ê¸°">
        <button class="btn secondary" id="backHome" title="í™ˆìœ¼ë¡œ">ã€ˆ í™ˆ</button>
        <button class="btn" id="printBtn" title="ì¸ì‡„">ğŸ–¨ï¸ ì¸ì‡„</button>
        <button class="btn" id="collapseAll" title="ì „ì²´ ì ‘ê¸°/í¼ì¹˜ê¸°">â–¾ ì•„ì½”ë””ì–¸</button>
      </nav>
    </header>

    <div class="container grid grid-2">
      <!-- ì¢Œì¸¡ ë‚´ë¹„ -->
      <nav class="leftnav card" id="toc" aria-label="ëª©ì°¨"></nav>

      <!-- ìš°ì¸¡ ì½˜í…ì¸  -->
      <section class="content grid" id="manualContent"></section>
    </div>
  </div>

  <!-- ===== í…œí”Œë¦¿ ===== -->
  <template id="tpl-section">
    <article class="section card p-24" data-section>
      <h2 class="row" data-title><span data-emoji>ğŸ“‘</span><span data-text>ì œëª©</span></h2>
      <div class="muted" data-meta></div>
      <div class="mt-16" data-body></div>
    </article>
  </template>

  <!-- ===== ì¸ë¼ì¸ ì•„ì´ì½˜(SVG) ===== -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
    <symbol id="ic-mainvalve" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="9" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M4 12h16M12 4v16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </symbol>
    <symbol id="ic-pto" viewBox="0 0 24 24">
      <rect x="3" y="6" width="18" height="12" rx="2" fill="none" stroke="currentColor" stroke-width="2"/>
      <path d="M9 6v-2h6v2M12 9v6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </symbol>
    <symbol id="ic-air" viewBox="0 0 24 24">
      <path d="M3 12c3-4 6-4 9 0s6 4 9 0" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <circle cx="12" cy="12" r="2" fill="currentColor"/>
    </symbol>
    <symbol id="ic-water" viewBox="0 0 24 24">
      <path d="M12 3c4 6 7 8.5 7 12a7 7 0 1 1-14 0c0-3.5 3-6 7-12z" fill="none" stroke="currentColor" stroke-width="2"/>
    </symbol>
  </svg>

  <script>
  ;(() => {
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));

    // ===== ë°ì´í„°(ì‹œë²”: íŒí”„ì°¨) =====
    const DATA = {
      vehicle: {
        key: 'pump',
        name: 'íŒí”„ì°¨',
        model: 'ì˜ˆ) 2024 XYZ-1500',
        specs: { í¬ê¸°:'L 7.2m Ã— W 2.3m Ã— H 3.1m', ë¬¼íƒ±í¬:'1500 L', íŒí”„ì •ê²©:'1500 L/min @ 1.0 MPa', ì—°ë£Œ:'ë””ì ¤' },
      },
      sections: [
        {
          id:'intro', emoji:'ğŸš’', title:'ì°¨ëŸ‰ì†Œê°œ ë° ì œì›',
          meta:'ì‚¬ì§„Â·ë‹¤ì´ì–´ê·¸ë¨ ê¶Œì¥ â€” ì‹œë²” ë°ì´í„°',
          body: ({specs}) => /*html*/`
            <div class="grid">
              <div>
                <p>ë³¸ ë§¤ë‰´ì–¼ì€ <strong>íŒí”„ì°¨</strong> ì¡°ì‘ ë° ì ê²€Â·ì •ë¹„ ë£¨í‹´ì„ ë‹¨ê³„ë³„ë¡œ ì œê³µí•©ë‹ˆë‹¤. ì‹œë²”ì‚¬ì—… ì„±ê³µ ì‹œ ë¬¼íƒ±í¬ì°¨/ê³ ê°€ì‚¬ë‹¤ë¦¬ì°¨ë¡œ í™•ì¥í•©ë‹ˆë‹¤.</p>
                <p class="mt-12 muted">ê³ í’ˆì§ˆ ì‚¬ì§„Â·360 íšŒì „ ì‚¬ì§„Â·1ë¶„ ì´ë‚´ ë™ì˜ìƒÂ·3D ì…ì²´ ì˜ìƒ ì¶”ê°€ ì˜ˆì •.</p>
              </div>
            </div>

            <div class="card p-16 mt-16">
              <h3>ì°¨ëŸ‰ì†Œê°œ ì˜ìƒ</h3>
              <video controls style="width:100%; max-width:800px; margin-top:12px; border-radius:12px;">
                <source src="ì°¨ëŸ‰ì†Œê°œ.mp4" type="video/mp4">
                ê·€í•˜ì˜ ë¸Œë¼ìš°ì €ëŠ” ë¹„ë””ì˜¤ íƒœê·¸ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
              </video>
            </div>

            <div class="card p-16 mt-16">
              <h3>ì†Œë°©ì°¨ ì œì›(ìš”ì•½)</h3>
              <table class="mt-8" aria-label="ì†Œë°©ì°¨ ì œì›">
                <thead>
                  <tr><th style="width:40%;">í•­ëª©</th><th>ë‚´ìš©</th></tr>
                </thead>
                <tbody>
                  <tr><td>ì°¨ì¢…</td><td>íŒí”„ì°¨</td></tr>
                  <tr><td>ì°¨ì²´/ì„€ì‹œ</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>ì—”ì§„í˜•ì‹ / ë°°ê¸°ëŸ‰ / ì¶œë ¥(kW/ps)</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>ë³€ì†ê¸° / êµ¬ë™ë°©ì‹</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>ì „ì¥ Ã— ì „í­ Ã— ì „ê³  (mm)</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>ì´ì¤‘ëŸ‰ (kg)</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>ìŠ¹ì°¨ì •ì›</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>ì—°ë£Œ / íƒ±í¬ìš©ëŸ‰ (L)</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>íŒí”„í˜•ì‹ / ì •ê²©í† ì¶œëŸ‰ (L/min) @ MPa</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>íƒ‘ì¬ ìˆ˜ì¡°(ë¬¼) / í¼íƒ±í¬ (L)</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>PTO í˜•ì‹</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>ì¶œí† ìˆ˜êµ¬(êµ¬ê²½/ê°œìˆ˜)</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>íƒ‘ì¬ í˜¸ìŠ¤(í¡Â·í† ) ê·œê²©/ê¸¸ì´</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>í¬ì†Œí™”ì„¤ë¹„(ë¯¹ì„œ/ì—ë“€ì„œ ë“±)</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>ë°œì „ê¸°/ì¡°ëª…ê¸°</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>ë¬´ì „/ITS/í•­ë²•ì¥ì¹˜</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                  <tr><td>ë¹„ìƒì¥ë¹„(ì‚¼ê°ëŒ€Â·ì†Œí™”ê¸°Â·êµ¬ê¸‰í‚¤íŠ¸)</td><td>ã€ˆì…ë ¥ã€‰</td></tr>
                </tbody>
              </table>
            </div>`
        },
        {
          id:'ops', emoji:'ğŸ§­', title:'í‘œì¤€ ë°©ìˆ˜ ì ˆì°¨',
          meta:'íŒí”„ì°¨ í‘œì¤€ ë°©ìˆ˜ ì ˆì°¨',
          body: () => /*html*/`
            <div class="grid">
              <div class="card p-16">
                <h3>1. í˜„ì¥ ë„ì°© ë° ì •ì°¨(Deployment)</h3>
                <p class="mt-8">ì†Œë°© í˜„ì¥ì— ë„ì°©í•˜ì—¬ ì†Œí™”í™œë™ì„ ìœ„í•´ ì ì ˆí•œ ìœ„ì¹˜ì— ì •ì°¨í•˜ê³  ì£¼ì²´ë¸Œë ˆì´í¬ë¥¼ ê±¸ê³  ê³ ì„ëª©ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.</p>
              </div>

              <div class="card p-16">
                <h3>2. íŒí”„ êµ¬ë™ ë° PTO ì—°ê²°(Pump Engagement)</h3>
                <p class="mt-8">ë©”ì¸ë°¸ë¸Œë¥¼ ì—´ê³  ë™ë ¥ì¸ì¶œì¥ì¹˜(PTO)ë¥¼ ì—°ê²°í•˜ì—¬ ì—”ì§„ì˜ ë™ë ¥ì„ íŒí”„ ì‘ë™ì— ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
              </div>

              <div class="card p-16">
                <h3>3. í¡ìˆ˜ì› ì—°ê²° ë° ê¸‰ìˆ˜ (Water Supply Connection)</h3>
                <p class="mt-8">ìì²´ ìˆ˜ì¡° ì‚¬ìš© ì‹œ: íŒí”„ ë°¸ë¸Œ'ë¥¼ ì—´ê³ í•˜ê¸° ìœ„í•´ 'íƒ±í¬-íŒí”„ ë°¸ë¸Œ(Tank to Pump Valve)'ë¥¼ ì—½ë‹ˆë‹¤.</p>
                <p>ì™¸ë¶€ ê¸‰ìˆ˜ì› ì‚¬ìš© ì‹œ: ê¸‰ìˆ˜ ê´€ì°½ ë˜ëŠ” ì†Œí™”ì „(hydrant)ë¥¼ íŒí”„ íˆ¬ë¡œì— ì—°ê²°í•˜ê³ , í•´ë‹¹ í¡ìˆ˜ ë°¸ë¸Œë¥¼ ì—½ë‹ˆë‹¤. ì´ ê²½ìš°, ì§„ê³µ íŒí•‘ ëª¨ë“œ(vacuum priming) ë˜ëŠ” í”ŒëŸ¬ë“œ(flood) ëª¨ë“œ(ì–‘ìˆ˜ ì••ë ¥) ì¤‘ í•˜ë‚˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
              </div>

              <div class="card p-16">
                <h3>4. í˜¸ìŠ¤ ë¼ì¸ ì¤€ë¹„ ë° ë°©ìˆ˜êµ¬ ê°œë°© (Hose Line Preparation)</h3>
                <p class="mt-8">í™”ì¬ì§„ì••ì— í•„ìš”í•œ ìˆ˜ê´€ì„ ì°¨ëŸ‰ì—ì„œ êº¼ë‚´ í™”ì  ê·¼ì²˜ì— ì „ê°œí•©ë‹ˆë‹¤. í˜¸ìŠ¤ê°€ ì¤€ë¹„ë˜ë©´, ê´€ì°½ì„ ì„œì„œíˆ ì—´ì–´ì„œ ë°©ìˆ˜ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.</p>
              </div>

              <div class="card p-16">
                <h3>5. ì••ë ¥ ì¡°ì • ë° ë°©ìˆ˜ (Pressure Control and Water Attack)</h3>
                <p class="mt-8">íŒí”„ ì¡°ì‘ìëŠ” ì—”ì§„ ìµœì „ì†(RPM)ì„ ì˜¬ë ¤ ì›í•˜ëŠ” ë°©ìˆ˜ ì••ë ¥(ì˜ˆ: ì•Œë§ì ìœ¼ë¡œ 150 PSI ë˜ëŠ” ë…¸ì¦ ì‚¬ì–‘ì— ë§ëŠ” ì••ë ¥)ì´ ì¶©ë¶„íˆ ë‚˜ì˜¤ë„ë¡ ì¡°ì •í•©ë‹ˆë‹¤.</p>
                <p>í˜„ì¥ ëŒ€ì›(ë‹´ë‹¹ ì¡°ì‘ì)ì€ ë…¸ì¦ ë°¸ë¸Œë¥¼ ì—´ì–´ í™”ì¬ì— ì§ì ‘ ë¬¼ì„ ë°©ìˆ˜í•©ë‹ˆë‹¤.</p>
              </div>
            </div>`
        },
        {
          id:'simulation', emoji:'ğŸ®', title:'ì‹œë®¬ë ˆì´ì…˜',
          meta:'ë°©ìˆ˜ ì ˆì°¨ ì‹œë®¬ë ˆì´ì…˜ í›ˆë ¨',
          body: () => /*html*/`
            <div class="grid">
              <div class="card p-16">
                <h3>ì†Œë°©ì°¨ ë¬¼ ê³µê¸‰ ì‹œìŠ¤í…œ ì‹œë®¬ë ˆì´ì…˜</h3>
                <p class="mt-8">3D ì¸í„°ë™í‹°ë¸Œ ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ì†Œë°©ì°¨ì˜ ë¬¼ ê³µê¸‰ ì‹œìŠ¤í…œì„ ì§ì ‘ ì¡°ì‘í•´ë³´ì„¸ìš”.</p>
                <iframe src="fire_truck_water_system.html" style="width: 100%; height: 800px; border: none; border-radius: 12px; margin-top: 16px;"></iframe>
              </div>
            </div>`
        },
        {
          id:'special', emoji:'ğŸµ', title:'ì˜¤ë””ì˜¤ ë§¤ë‰´ì–¼',
          meta:'',
          body: () => /*html*/`
            <div class="grid">
              <div class="card p-16" style="background: linear-gradient(135deg, rgba(138,43,226,0.15) 0%, rgba(75,0,130,0.1) 100%); border: 2px solid rgba(138,43,226,0.4); box-shadow: 0 8px 32px rgba(138,43,226,0.3), 0 0 60px rgba(138,43,226,0.15);">
                <div style="display:flex; align-items:center; gap:12px; margin-bottom:16px;">
                  <span style="font-size:40px;">ğŸ™ï¸</span>
                  <h3 style="margin:0; font-size:24px; background: linear-gradient(135deg, #9d4edd 0%, #c77dff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">ì†Œë°©ì°¨ ë§¤ë‰´ì–¼ íŒŸìºìŠ¤íŠ¸</h3>
                </div>
                <video controls style="width:100%; max-width:800px; border-radius:16px; box-shadow: 0 4px 20px rgba(0,0,0,0.5); border: 2px solid rgba(138,43,226,0.3);">
                  <source src="ì˜¤ë””ì˜¤.mp4" type="video/mp4">
                  ê·€í•˜ì˜ ë¸Œë¼ìš°ì €ëŠ” ë¹„ë””ì˜¤ íƒœê·¸ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                </video>
              </div>

              <div class="card p-16" style="background: linear-gradient(135deg, rgba(255,107,107,0.15) 0%, rgba(255,71,87,0.1) 100%); border: 2px solid rgba(255,71,87,0.4); box-shadow: 0 8px 32px rgba(255,71,87,0.3), 0 0 60px rgba(255,71,87,0.15);">
                <div style="display:flex; align-items:center; gap:12px; margin-bottom:16px;">
                  <span style="font-size:40px;">ğŸ¬</span>
                  <h3 style="margin:0; font-size:24px; background: linear-gradient(135deg, #ff6b6b 0%, #ff8787 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">ì†Œë°©ì°¨ ë™ì˜ìƒ ë§¤ë‰´ì–¼</h3>
                </div>
                <video controls style="width:100%; max-width:800px; border-radius:16px; box-shadow: 0 4px 20px rgba(0,0,0,0.5); border: 2px solid rgba(255,71,87,0.3);">
                  <source src="ì˜ìƒ.mp4" type="video/mp4">
                  ê·€í•˜ì˜ ë¸Œë¼ìš°ì €ëŠ” ë¹„ë””ì˜¤ íƒœê·¸ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                </video>
              </div>
            </div>`
        },
        {
          id:'faults', emoji:'ğŸ§¯', title:'ê³ ì¥ ë° ì‘ê¸‰ì¡°ì¹˜',
          meta:'ì¥ì¹˜ë³„ ê³ ì¥â€“ì›ì¸â€“ì‘ê¸‰ì¡°ì¹˜ ë§¤í•‘',
          body: () => /*html*/`
            <div class="grid">
              <table aria-label="ê³ ì¥ í‘œ">
                <thead><tr><th style="width:28%">ì¦ìƒ</th><th style="width:32%">ê°€ëŠ¥ ì›ì¸</th><th>í˜„ì¥ ì‘ê¸‰ì¡°ì¹˜</th></tr></thead>
                <tbody>
                  <tr><td>í”„ë¼ì´ë° ì‹¤íŒ¨</td><td>í¡ì… ë¼ì¸ ëˆ„ê³µ, ìŠ¤íŠ¸ë ˆì´ë„ˆ ë§‰í˜, í”„ë¼ì´ë°íŒí”„ ê³ ì¥</td><td>ì—°ê²°ë¶€ ì¬ì²´ê²°Â·ì‹¤ í…Œì´í”„ ë³´ê°•, ìŠ¤íŠ¸ë ˆì´ë„ˆ ì²­ì†Œ, ì˜ˆë¹„ í”„ë¼ì´ë° ì‚¬ìš©</td></tr>
                  <tr><td>ì••ë ¥ ë¶ˆì•ˆì •</td><td>ê³µê¸° í˜¼ì…, ë°¸ë¸Œ ê¸‰ì¡°ì‘, í† ì¶œ ë¼ì¸ ëˆ„ìˆ˜</td><td>ê³µê¸°ì œê±° ì¬ìˆ˜í–‰, ë°¸ë¸Œ ì ì§„ ì¡°ì‘, ëˆ„ìˆ˜ ì§€ì  ë°´ë”© ì„ì‹œ ì¡°ì¹˜</td></tr>
                  <tr><td>PTO ë¯¸ì‘ë™</td><td>ë³€ì† ì¡°ê±´ ë¶ˆëŸ‰, ì „ê¸°ë°°ì„  ì ‘ì´‰ë¶ˆëŸ‰, ì•ˆì „ìŠ¤ìœ„ì¹˜ í•´ì œ</td><td>ì¤‘ë¦½Â·ì£¼ì°¨ ì¬í™•ì¸, íœ´ì¦ˆÂ·ì»¤ë„¥í„° í™•ì¸, ìˆ˜ë™ í•´ì œ ì ˆì°¨ ê²€í† </td></tr>
                </tbody>
              </table>
              <p class="muted">ì •ì‹ ìˆ˜ë¦¬ ì „ê¹Œì§€ëŠ” ì„ì‹œ ì¡°ì¹˜ë§Œ ìˆ˜í–‰. ì¸ëª…Â·ì¥ë¹„ ì•ˆì „ì´ ìš°ì„ .</p>
            </div>`
        },
        {
          id:'law', emoji:'ğŸ“œ', title:'ê´€ë ¨ë²•ë ¹',
          meta:'ì†Œë°©ì°¨ ìš´ì „ìë¥¼ ìœ„í•œ êµí†µë²•ê·œ í•µì‹¬ ìš”ì•½ ë° ì¡°ë¬¸ ì •ë¦¬',
          body: () => /*html*/`
            <div class="grid">
              <table aria-label="ìš´ì „ íŠ¹ë¡€Â·ì˜ë¬´ ìš”ì•½">
                <thead><tr><th style="width:20%">êµ¬ë¶„</th><th style="width:40%">ì£¼ìš” ë‚´ìš©</th><th style="width:20%">ë²•ì  ê·¼ê±°</th><th>ìœ ì˜ ì‚¬í•­</th></tr></thead>
                <tbody>
                  <tr><td>ê¸´ê¸‰ì°¨ ì§€ì •</td><td>ì†Œë°©ì°¨ëŠ” ê¸´ê¸‰ìë™ì°¨</td><td>ì œ2ì¡°</td><td>ê²½ê´‘ë“±Â·ì‚¬ì´ë Œ ì‚¬ìš© ì‹œ íŠ¹ë¡€ ì¸ì •</td></tr>
                  <tr><td>ìš°ì„  í†µí–‰</td><td>ë‹¤ë¥¸ ì°¨ëŸ‰Â·ë³´í–‰ìëŠ” ì§„ë¡œ ì–‘ë³´ ì˜ë¬´</td><td>ì œ26ì¡°</td><td>ì–‘ë³´ ë¶ˆì´í–‰ ì‹œ ê³¼íƒœë£ŒÂ·ë²Œì </td></tr>
                  <tr><td>ì‹ í˜¸ìœ„ë°˜</td><td>ì¶œë™ ëª©ì  ì‹œ ì‹ í˜¸Â·ì§€ì‹œ ë¯¸ì¤€ìˆ˜ ê°€ëŠ¥</td><td>ì œ27ì¡°</td><td><strong>êµì°¨ë¡œ ì§„ì… ì „ ì¼ì‹œì •ì§€Â·ì•ˆì „í™•ì¸ í•„ìˆ˜</strong></td></tr>
                  <tr><td>ì¤‘ì•™ì„ /ì—­ì£¼í–‰</td><td>ì¶œë™ ëª©ì  ì‹œ ê°€ëŠ¥</td><td>ì œ27ì¡°</td><td>ì•ˆì „í™•ë³´ ì „ì œ, ì‚¬ê³  ì‹œ ì±…ì„ ë°œìƒ ê°€ëŠ¥</td></tr>
                  <tr><td>ê³¼ì†</td><td>ì¶œë™ ëª©ì  ì‹œ ê°€ëŠ¥</td><td>ì œ27ì¡°</td><td>ë¬´ë¦¬í•œ ê³¼ì†ì€ ì±…ì„ ì»¤ì§</td></tr>
                  <tr><td>ë³´í–‰ì ë³´í˜¸</td><td>ë³´í–‰ì ì¶©ëŒ ì‹œ íŠ¹ë¡€ ì ìš© ì–´ë ¤ì›€</td><td>ì œ27ì¡° ë‹¨ì„œ</td><td>íš¡ë‹¨ë³´ë„Â·ë³´í–‰ë°€ì§‘ êµ¬ê°„ ê°ë³„ ì£¼ì˜</td></tr>
                  <tr><td>ê°“ê¸¸ í†µí–‰</td><td>ê³ ì†ë„ë¡œ ê°“ê¸¸ í†µí–‰ ê°€ëŠ¥</td><td>ì œ60ì¡°</td><td>ì •ì²´ êµ¬ê°„ì—ì„œ ì•ˆì „ê±°ë¦¬ í™•ë³´</td></tr>
                </tbody>
              </table>

              <table aria-label="ë©´í—ˆÂ·ìê²© ìš”ì•½" class="mt-16">
                <thead><tr><th style="width:28%">ì°¨ëŸ‰ ìœ í˜•</th><th style="width:34%">ì°¨ì¢…/ì¤‘ëŸ‰</th><th>ê¶Œì¥ ë©´í—ˆ(ë“±ë¡ì¦ ìµœì¢… í™•ì¸)</th></tr></thead>
                <tbody>
                  <tr><td>íŒí”„ì°¨Â·ë¬¼íƒ±í¬ì°¨</td><td>ì´ì¤‘ëŸ‰ 10í†¤ ê¸°ì¤€</td><td>10í†¤ ë¯¸ë§Œ: 1ì¢… ë³´í†µ / ì´ìƒ: 1ì¢… ëŒ€í˜•</td></tr>
                  <tr><td>ì‚¬ë‹¤ë¦¬ì°¨Â·ê³ ê°€ì°¨</td><td>íŠ¹ìˆ˜ì‘ì—…í˜•</td><td>1ì¢… ëŒ€í˜•</td></tr>
                  <tr><td>êµ¬ì¡°ëŒ€ ì°¨ëŸ‰</td><td>íŠ¹ìˆ˜ì‘ì—…í˜•</td><td>10í†¤ ë¯¸ë§Œ: 1ì¢… ë³´í†µ / ì´ìƒ: 1ì¢… ëŒ€í˜•</td></tr>
                  <tr><td>ì§€íœ˜ì°¨</td><td>ìŠ¹í•©</td><td>1ì¢… ë³´í†µ(15ì¸ ì´í•˜)</td></tr>
                  <tr><td>ì§€íœ˜ë²„ìŠ¤</td><td>ëŒ€í˜• ìŠ¹í•©</td><td>1ì¢… ëŒ€í˜•(16ì¸ ì´ìƒ)</td></tr>
                  <tr><td>êµ¬ê¸‰ì°¨</td><td>ìŠ¹í•©/í™”ë¬¼</td><td>2ì¢… ë³´í†µ ë˜ëŠ” 1ì¢… ë³´í†µ(ì°¨ì¢…Â·ì¤‘ëŸ‰ ê¸°ì¤€)</td></tr>
                </tbody>
              </table>
              <p class="muted">â€» ì°¨ëŸ‰ë“±ë¡ì¦ì˜ ì°¨ì¢…/ìŠ¹ì°¨ì •ì›/ì¤‘ëŸ‰ìœ¼ë¡œ ë©´í—ˆ ê¸°ì¤€ ìµœì¢… í™•ì¸. ìƒì„¸ ê¸°ì¤€Â·ì˜ˆì™¸ëŠ” ë‚´ë¶€ ê·œì •ê³¼ ìµœì‹  ë²•ë ¹ì— ë”°ë¦…ë‹ˆë‹¤.</p>

              <table aria-label="ë²•ê·œ í•µì‹¬ìš”ì•½" class="mt-16">
                <thead><tr><th style="width:30%">êµ¬ë¶„</th><th>ë‚´ìš©</th></tr></thead>
                <tbody>
                  <tr><td>ë¬´ì œí•œ ë©´ì±… ì•„ë‹˜</td><td>ì†Œë°©ì°¨ëŠ” ê¸´ê¸‰ìë™ì°¨ì— í•´ë‹¹í•˜ì§€ë§Œ, í•­ìƒ ì•ˆì „í™•ë³´ê°€ ì „ì œë˜ì–´ì•¼ í•¨</td></tr>
                  <tr><td>íŠ¹ë¡€ ì¸ì • ì¡°ê±´</td><td>ê²½ê´‘ë“±+ì‚¬ì´ë Œ ì‚¬ìš©ê³¼ ìµœëŒ€í•œì˜ ì•ˆì „í™•ë³´ê°€ ê¸°ë³¸ ì¡°ê±´</td></tr>
                  <tr><td>ë³´í–‰ì ì‚¬ê³  ì£¼ì˜</td><td>ë³´í–‰ì ì‚¬ê³ ëŠ” íŠ¹ë¡€ ì ìš©ì´ ì–´ë ¤ì›Œ ìš´ì „ì ì±…ì„ì´ ë§¤ìš° í¼</td></tr>
                </tbody>
              </table>

              <table aria-label="ìì£¼ í•˜ëŠ” ì˜¤í•´" class="mt-16">
                <thead><tr><th style="width:45%">ì§ˆë¬¸</th><th>ë‹µë³€</th></tr></thead>
                <tbody>
                  <tr><td>Q. ì‚¬ì´ë Œ ì—†ì´ ê¸‰í•˜ë©´ íŠ¹ë¡€ ê°€ëŠ¥?</td><td><strong>ë¶ˆê°€</strong> - ê²½ê´‘ë“±/ì‚¬ì´ë Œ ëª¨ë‘ í•„ìš”í•¨</td></tr>
                  <tr><td>Q. ë²„ìŠ¤ì „ìš©ì°¨ë¡œ í†µí–‰ ì ˆëŒ€ ë¶ˆê°€?</td><td><strong>ê¸´ê¸‰ ëª©ì  ìˆ˜í–‰ ì¤‘</strong>ì´ë¼ë©´ <strong>ê°€ëŠ¥</strong></td></tr>
                </tbody>
              </table>

              <table aria-label="ì£¼ìš” ì¡°ë¬¸" class="mt-16">
                <thead><tr><th style="width:25%">ì¡°ë¬¸</th><th>ë‚´ìš©</th></tr></thead>
                <tbody>
                  <tr><td>ì œ2ì¡°</td><td>ê¸´ê¸‰ìë™ì°¨ ì§€ì •</td></tr>
                  <tr><td>ì œ15Â·16ì¡°</td><td>ì „ìš©ì°¨ë¡œ(ë²„ìŠ¤Â·ë…¸ë©´ì „ì°¨) í†µí–‰</td></tr>
                  <tr><td>ì œ29ì¡°</td><td>ê¸´ê¸‰ìë™ì°¨ ìš°ì„ í†µí–‰</td></tr>
                  <tr><td>ì œ30ì¡°</td><td>ê¸´ê¸‰ìë™ì°¨ íŠ¹ë¡€</td></tr>
                  <tr><td>ì œ60ì¡°</td><td>ê³ ì†ë„ë¡œ ê°“ê¸¸ í†µí–‰</td></tr>
                  <tr><td>ì œ64ì¡°</td><td>ê³ ì†ë„ë¡œ ë“± ì •ì°¨Â·ì£¼ì°¨ ê¸ˆì§€</td></tr>
                  <tr><td>ì œ158ì¡°ì˜2</td><td>ê¸´ê¸‰ìë™ì°¨ í˜•ì˜ ê°ë©´</td></tr>
                </tbody>
              </table>

              <p class="muted mt-16">ì°¸ê³ : "ì†Œë°©ì°¨ ìš´ì „ìë¥¼ ìœ„í•œ êµí†µë²•ê·œ ì²´í¬ë¦¬ìŠ¤íŠ¸" (PDF)</p>
            </div>`
        },
        {
          id:'contacts', emoji:'ğŸ“', title:'ê´€ë ¨ ì—…ì²´ ì—°ë½ì²˜',
          meta:'ì •ë¹„/ë¶€í’ˆ/ì¥ë¹„ ì ê²€ ë“± í˜‘ë ¥ì—…ì²´ ëª©ë¡',
          body: () => /*html*/`
            <div class="grid">
              <table aria-label="ì—…ì²´ ì—°ë½ì²˜">
                <thead><tr><th style="width:28%;">ì—…ì²´ëª…</th><th style="width:28%;">ì„œë¹„ìŠ¤</th><th style="width:22%;">ì „í™”</th><th>ë¹„ê³ </th></tr></thead>
                <tbody>
                  <tr style="background: linear-gradient(90deg, rgba(26,163,255,.08), transparent);"><td><strong>ì¸ì²œì†Œë°©ë³¸ë¶€</strong></td><td>ì¢…í•© ë¬¸ì˜</td><td><strong>010-0000-0000</strong></td><td>24ì‹œê°„ ìƒë‹´ ê°€ëŠ¥</td></tr>
                  <tr><td>ì˜ˆ) ì¸ì²œì†Œë°© ì •ë¹„ì„¼í„°</td><td>íŒí”„/ë°¸ë¸Œ ì •ë¹„</td><td>032-000-0000</td><td>í‰ì¼ 09:00â€“18:00</td></tr>
                  <tr><td>ì˜ˆ) XYZ í˜¸ìŠ¤</td><td>í˜¸ìŠ¤/ì»¤í”Œë§</td><td>02-000-0000</td><td>ê¸´ê¸‰ ì¶œë™ ê°€ëŠ¥</td></tr>
                  <tr><td>ì˜ˆ) PTO ì „ë¬¸</td><td>PTO/ë™ë ¥ì „ë‹¬</td><td>031-000-0000</td><td>ë¶€í’ˆ ë‹¹ì¼ ë°°ì†¡</td></tr>
                </tbody>
              </table>
              <p class="muted mt-8">ì‹¤ì œ ì—°ë½ì²˜ëŠ” ë‚´ë¶€ ì—‘ì…€ì—ì„œ ë¶ˆëŸ¬ì™€ ìë™ ë°˜ì˜ ì˜ˆì •(CSV ì—°ë™).</p>
            </div>`
        },
      ]
    };

    // ===== ìƒíƒœ =====
    const state = {
      openManual: null,
      doneSteps: new Set(JSON.parse(localStorage.getItem('doneSteps')||'[]')),
      checklist: JSON.parse(localStorage.getItem('checklist')||'{}'),
      currentSection: localStorage.getItem('currentSection')||'intro',
    };

    // ===== í™ˆ ì¸í„°ë™ì…˜ =====
    document.addEventListener('keydown', (e)=>{ if(e.key === 'g') window.__g=1; else if(window.__g && e.key==='s'){ e.preventDefault(); openManual('pump'); window.__g=0; } });
    document.addEventListener('keyup', (e)=>{ if(e.key==='g') window.__g=0; });
    document.getElementById('searchForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const q = (document.getElementById('q').value||'').trim();
      if(/íŒí”„ì°¨|pump|íŒí”„/.test(q)) openManual('pump');
      else alert('ì‹œë²”ì—ì„œëŠ” \"íŒí”„ì°¨\" ë§¤ë‰´ì–¼ì„ ì œê³µí•©ë‹ˆë‹¤.');
    });
    document.addEventListener('click', (e)=>{
      const btn = e.target.closest('[data-open]');
      if(btn) {
        const type = btn.dataset.open;
        if(type === 'pump') {
          openManual('pump');
        } else if(type === 'water') {
          alert('ë¬¼íƒ±í¬ì°¨ ë§¤ë‰´ì–¼ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
        } else if(type === 'ladder') {
          alert('ê³ ê°€ì°¨ ë§¤ë‰´ì–¼ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
        }
      }
    });

    // ===== ë§¤ë‰´ì–¼ ë Œë”ë§ =====
    function openManual(key){
      if(key !== 'pump') return;
      state.openManual = key;
      document.getElementById('home').style.display = 'none';
      document.getElementById('app').style.display = 'block';
      renderManual();
      const first = document.querySelector('#manualContent [data-section] h2');
      if(first) first.tabIndex = -1, first.focus();
    }

    function renderManual(){
      const toc = document.getElementById('toc'); toc.innerHTML = '';
      DATA.sections.forEach(s=>{
        const a = document.createElement('a');
        a.href = `#${s.id}`; a.dataset.id = s.id; a.innerHTML = `<span aria-hidden=\"true\">${s.emoji}</span> ${s.title}`;
        a.setAttribute('aria-current', s.id===state.currentSection);
        a.addEventListener('click', (e)=>{
          e.preventDefault();

          // ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê³  ì„ íƒëœ ì„¹ì…˜ë§Œ í‘œì‹œ
          document.querySelectorAll('[data-section]').forEach(section => {
            section.style.display = section.id === s.id ? '' : 'none';
          });

          const targetEl = document.getElementById(s.id);
          if(targetEl) {
            targetEl.scrollIntoView({behavior:'smooth', block:'start'});
            history.pushState(null, null, `#${s.id}`);
          }

          state.currentSection = s.id;
          localStorage.setItem('currentSection', s.id);
          updateCurrentTOC();
        });
        toc.appendChild(a);
      });

      const root = document.getElementById('manualContent'); root.innerHTML = '';
      DATA.sections.forEach((sec, index) => {
        const sectionEl = buildSection(sec);
        // ì²« ë²ˆì§¸ ì„¹ì…˜ë§Œ í‘œì‹œ, ë‚˜ë¨¸ì§€ëŠ” ìˆ¨ê¹€
        if(index !== 0) {
          sectionEl.querySelector('[data-section]').style.display = 'none';
        }
        root.appendChild(sectionEl);
      });

      const filter = document.createElement('input');
      filter.id = 'sectionSearch'; filter.placeholder = 'ì„¹ì…˜/í‚¤ì›Œë“œ í•„í„°';
      filter.style.cssText = 'padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:var(--panel);color:var(--text);margin:12px 0;';
      document.querySelector('.appbar').appendChild(filter);
      filter.addEventListener('input', (e)=>{
        const v = e.target.value.trim().toLowerCase();
        Array.from(document.querySelectorAll('#manualContent [data-section]')).forEach(el=>{
          const text = (el.textContent||'').toLowerCase();
          el.style.display = v && !text.includes(v) ? 'none' : '';
        });
      });

      refreshStepProgress();
      refreshChecklistProgress();
    }

    function buildSection(sec){
      const t = document.importNode(document.getElementById('tpl-section').content, true);
      const $sec = t.querySelector('[data-section]');
      $sec.id = sec.id;
      t.querySelector('[data-emoji]').textContent = sec.emoji;
      t.querySelector('[data-text]').textContent = sec.title;
      t.querySelector('[data-meta]').textContent = sec.meta||'';
      t.querySelector('[data-body]').innerHTML = typeof sec.body==='function' ? sec.body({specs: DATA.vehicle.specs}) : (sec.body||'');

      observer.observe($sec);

      Array.from(t.querySelectorAll('#stdSteps [data-done]')).forEach((btn)=>{
        btn.addEventListener('click', ()=>{
          const host = btn.closest('[data-step]'); const id = Number(host.dataset.step);
          if(state.doneSteps.has(id)) state.doneSteps.delete(id); else state.doneSteps.add(id);
          localStorage.setItem('doneSteps', JSON.stringify([...state.doneSteps]));
          host.style.outline = state.doneSteps.has(id) ? '2px solid var(--ok)' : '';
          btn.textContent = state.doneSteps.has(id) ? 'ì·¨ì†Œ' : 'ì™„ë£Œ';
          refreshStepProgress();
        });
      });

      return t;
    }

    function refreshStepProgress(){
      const total = 4; const done = state.doneSteps.size; const pct = Math.round(done/total*100);
      const bar = document.getElementById('stepProgress'); if(bar) bar.style.width = pct+'%';
    }
    function refreshChecklistProgress(){
      const all = document.querySelectorAll('#manualContent [data-checklist] input[type=\"checkbox\"]').length;
      const done = Object.values(state.checklist).filter(Boolean).length;
      const pct = all===0 ? 0 : Math.round(done/all*100);
      const bar = document.getElementById('checkProgress'); if(bar) bar.style.width = pct+'%';
    }

    function updateCurrentTOC(){
      Array.from(document.querySelectorAll('#toc a')).forEach(a=> a.setAttribute('aria-current', a.dataset.id===state.currentSection));
    }

    const observer = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){ state.currentSection = e.target.id; localStorage.setItem('currentSection', state.currentSection); updateCurrentTOC(); }
      });
    }, { rootMargin: '0px 0px -70% 0px', threshold: 0.1 });

    document.addEventListener('click', (e)=>{
      if(e.target.id==='backHome'){ document.getElementById('app').style.display='none'; document.getElementById('home').style.display='grid'; }
      if(e.target.id==='printBtn'){ window.print(); }
      if(e.target.id==='collapseAll'){ const open = document.querySelectorAll('details[open]').length>0; document.querySelectorAll('details').forEach(d=> open ? d.removeAttribute('open') : d.setAttribute('open','')); }
    });

    window.addEventListener('hashchange', ()=>{
      const id = location.hash.replace('#','');
      const el = document.getElementById(id);
      if(el){ el.scrollIntoView({behavior:'smooth', block:'start'}); state.currentSection=id; updateCurrentTOC(); }
    });
  })();
  </script>
<!-- build: v1.0 | ê°œì„ ì‚¬í•­: TypeError ìˆ˜ì •, smooth ìŠ¤í¬ë¡¤, TOC ì‹œê°ì  ê°œì„ , ê²½ê³  ë©”ì‹œì§€ ì¶”ê°€ -->
</body>
</html>
